// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

// Define the database schema
datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

// Define the generator for Prisma Client library
generator client {
  provider = "prisma-client-js"
}

// Define the Employee model
model Employee {
  id           Int      @id @default(autoincrement())
  name         String
  email        String   @unique
  mobile       String   @unique
  dob          DateTime
  teamLeadId   Int?
  teamLead     User?   @relation(fields: [teamLeadId], references: [id]) // Represents the employee's designated team leader
  assignedBy  User?   @relation(name: "AssignedBy", fields: [teamLeadId], references: [id]) // Represents the user who assigned the employee to a team (can be different from the team leader)
}

// Define the User model
model User {
  id           Int      @id @default(autoincrement())
  email        String   @unique
  password     String
  role         String   // "owner", "team lead", "employee"
  organization Organization?
  employees    Employee[]  @relation(name: "UserEmployees")
  teamLeads    Employee[]  @relation(fields: [id], references: [teamLeadId]) // Users who are team leads for multiple employees
}

// Define the Organization model
model Organization {
  id           Int      @id @default(autoincrement())
  name         String
  owner        User      @relation(fields: [ownerId], references: [id])
  ownerId      Int       @unique
}
